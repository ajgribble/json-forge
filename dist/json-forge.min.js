!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.JSONForge=r()}(this,function(){"use strict";var o="[object Object]";var r,e,t=Function.prototype,n=Object.prototype,c=t.toString,i=n.hasOwnProperty,u=c.call(Object),s=n.toString,a=(r=Object.getPrototypeOf,e=Object,function(t){return r(e(t))});var f=function(t){if(!(r=t)||"object"!=typeof r||s.call(t)!=o||function(t){var r=!1;if(null!=t&&"function"!=typeof t.toString)try{r=!!(t+"")}catch(t){}return r}(t))return!1;var r,e=a(t);if(null===e)return!0;var n=i.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==u},l=Array.isArray,p=9007199254740991,y="[object Arguments]",h="[object Function]",v="[object GeneratorFunction]",b=/^(?:0|[1-9]\d*)$/;var m,j,g=Object.prototype,d=g.hasOwnProperty,O=g.toString,_=g.propertyIsEnumerable,A=(m=Object.keys,j=Object,function(t){return m(j(t))});function S(t,r){var e,n,o,c=P(t)||(o=n=e=t)&&"object"==typeof o&&k(n)&&d.call(e,"callee")&&(!_.call(e,"callee")||O.call(e)==y)?function(t,r){for(var e=-1,n=Array(t);++e<t;)n[e]=r(e);return n}(t.length,String):[],i=c.length,u=!!i;for(var s in t)!r&&!d.call(t,s)||u&&("length"==s||F(s,i))||c.push(s);return c}function w(t){if(e=(r=t)&&r.constructor,n="function"==typeof e&&e.prototype||g,r!==n)return A(t);var r,e,n,o=[];for(var c in Object(t))d.call(t,c)&&"constructor"!=c&&o.push(c);return o}function F(t,r){return!!(r=null==r?p:r)&&("number"==typeof t||b.test(t))&&-1<t&&t%1==0&&t<r}var P=Array.isArray;function k(t){return null!=t&&("number"==typeof(c=t.length)&&-1<c&&c%1==0&&c<=p)&&(o=typeof(n=r=t),!((e=!n||"object"!=o&&"function"!=o?"":O.call(r))==h||e==v));var r,e,n,o,c}var x=function(t){return k(t)?S(t):w(t)},E=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},C=function(){function n(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}();return function(){function u(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};E(this,u);var r=t.map,e=void 0===r?{}:r,n=t.prune,o=void 0===n?{}:n,c=t.compressors,i=void 0===c?{}:c;this._map=e,this._prune=o,this._compressors=i}return C(u,[{key:"process",value:function(t){if(l(t))return t.map(this.process.bind(this));if(f(t)){for(var r=x(t),e={},n=0;n<r.length;n++){var o=r[n],c=this._map[o];if(this._prune[o]);else if(c){if(this._compressors[c])return this._compressors[c](t[o],c);e[c]=this.process(t[o])}else{if(this._compressors[o])return this._compressors[o](t[o],o);e[o]=this.process(t[o])}}return e}return t}}]),u}()});
